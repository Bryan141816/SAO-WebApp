



{% extends "main.html" %}
{% load static %}
{% block title %}Counseling App With Scheduler{% endblock %}
{% block headcontent %}
<link rel="stylesheet" type="text/css" href="{% static 'stylesheet/counseling_app_admin.css'%}">
{% endblock %}
{% block bodycontent %}

    <div class="container">
        {{form.errors}}
        <h3>GUIDANCE(Admin)</h3>
        <span><label id="dir-gray">Home</label><label id="dir-orange"> > Exit Interview</label></span>
        <div class="form-container">
            {% csrf_token %}
            <h2>Exit Interview Request List</h2>
            <label>Enter ID number:</label>
            <span id="search_id">
                <input type="text" name="studentID" placeholder="search" required="" id="studentIDBox">
                <button class="OrangeButton" id="searchButton">Search</button>
                <ul class="messages">
                    {% for message in messages %}
                    <li class="{{ message.tags }}">{{ message }}</li>
                    {% endfor %}
                </ul>
            </span>
            <table id="info_table">
                <tr id="info_table_head">
                    <th>DATE RECEIVED</th>
                    <th>STUDENT ID</th>
                    <th>NAME</th>
                    <th colspan="2">STATUS</th>
                </tr>
                {% for interview_request in exit_interview_request %}
                <tr>
                        <input type="hidden" name="exitinterviewId" class="exitinterviewId" value="{{ interview_request.exitinterviewId }}">
                        <td>{{ interview_request.dateRecieved }}</td>
                        <td>{{ interview_request.studentID.studID }}</td>
                        <td>{{ interview_request.studentID.lastname }}, {{ interview_request.studentID.firstname }}</td>
                        <td>
                            {% if interview_request.status == 'Accepted' %}
                                <span class="accepted">{{ interview_request.status }}</span>
                            {% elif interview_request.status == 'Declined' %}
                                <span class="declined">{{ interview_request.status }}</span>
                            {% elif interview_request.status == 'Pending' %}
                                <span class="pending">{{ interview_request.status }}</span>
                            {% elif interview_request.status == 'Expired' %}
                                <span class="expired">{{ interview_request.status }}</span>
                            {% else %}
                                {{ interview_request.status }}
                            {% endif %}
                        </td>                        
                        <td>
                            <div class="horizontal">
                                {% if interview_request.status != 'Expired' and interview_request.status != 'Accepted' and interview_request.status != 'Declined' %}
                                    <button class="accept" id="acceptButton">ACCEPT</button>
                                    <button class="decline" id="declineButton">DECLINE</button>
                                {% endif %}
                                <button class="delete" id="delete">DELETE</button>
                            </div>
                        </td>
                        
                    </tr>
                {% endfor %}

            </table>
        </div>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="{% static 'scripts/exit_interview_admin.js'%}"></script>
{% endblock %}